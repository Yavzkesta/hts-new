---
// Composant pour optimiser le chargement du CSS de la page Terms
---

<script is:inline>
  // Fonction pour optimiser le chargement du CSS terms
  (function() {
    // Fonction pour détecter si nous sommes sur la page terms
    function isTermsPage() {
      return window.location.pathname.includes('/terms');
    }
    
    // Fonction pour optimiser les feuilles de style
    function optimizeTermsCSS() {
      // Trouver la feuille de style terms
      const stylesheets = Array.from(document.querySelectorAll('link[rel="stylesheet"]'));
      
      stylesheets.forEach(stylesheet => {
        const href = stylesheet.getAttribute('href');
        if (!href) return;
        
        // Si c'est la feuille de style terms
        if (href.includes('terms')) {
          // Si nous ne sommes pas sur la page terms, supprimer complètement
          if (!isTermsPage()) {
            stylesheet.parentNode.removeChild(stylesheet);
          } else {
            // Sur la page terms, utiliser une technique de chargement différé
            // pour ne pas bloquer le rendu initial
            stylesheet.setAttribute('media', 'print');
            stylesheet.setAttribute('onload', "this.media='all'");
            stylesheet.setAttribute('data-optimized', 'true');
          }
        }
      });
    }
    
    // Exécuter l'optimisation dès que possible
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', optimizeTermsCSS);
    } else {
      optimizeTermsCSS();
    }
  })();
</script>